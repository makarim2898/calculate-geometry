<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hexagon Toolpath Generator</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    canvas { border: 1px solid #ccc; margin-top: 10px; }
    textarea { width: 100%; height: 120px; margin-top: 10px; font-family: monospace; }
    label { display: block; margin-top: 10px; }
    input, select { width: 100%; padding: 5px; margin-top: 5px; }
    button { margin-top: 10px; padding: 10px 20px; }
  </style>
</head>
<body>
  <h2>Hexagon Toolpath Generator (NC)</h2>

  <label>Flat to Flat (mm):
    <input type="number" id="flat" step="0.01">
  </label>
  <label>Tool Diameter (mm):
    <input type="number" id="tool" step="0.01">
  </label>
  <label>Jenis Kepala Baut:
    <select id="type">
      <option value="hex">Kunci Pas (Hex Bolt)</option>
      <option value="socket">Kunci L (Socket Bolt)</option>
    </select>
  </label>
  <button onclick="generate()">Generate</button>
  <button onclick="downloadGCode()">Export G-code (.gcode)</button>

  <canvas id="preview" width="300" height="300"></canvas>

  <h3>Koordinat Asli (X, Y) â€” Tanpa Offset</h3>
  <textarea id="coords" readonly></textarea>

  <h3>G-Code (tanpa Z) â€” Sudah Di-offset</h3>
  <textarea id="gcode" readonly></textarea>

  <script>
    let gcodeText = '';

    function generate() {
      const flat = parseFloat(document.getElementById('flat').value);
      const tool = parseFloat(document.getElementById('tool').value);
      const type = document.getElementById('type').value;

      if (!flat || !tool) return alert('Semua input wajib diisi!');

      const canvas = document.getElementById('preview');
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      const cx = canvas.width / 2;
      const cy = canvas.height / 2;

      const baseRadius = flat / (2 * Math.sin(Math.PI / 6));
      const offset = (type === 'hex') ? tool / 2 : -tool / 2;
      const centerRadius = baseRadius + offset;

      // Koordinat asli tanpa offset (untuk display & referensi)
      const coordsBase = [];
      for (let i = 0; i < 6; i++) {
        const angle = Math.PI / 6 + i * Math.PI / 3;
        const x = +(baseRadius * Math.cos(angle)).toFixed(4);
        const y = +(baseRadius * Math.sin(angle)).toFixed(4);
        coordsBase.push({ x, y });
      }
      coordsBase.push(coordsBase[0]);

      // Koordinat untuk G-code (sudah offset)
      const coordsOffset = [];
      for (let i = 0; i < 6; i++) {
        const angle = Math.PI / 6 + i * Math.PI / 3;
        const x = +(centerRadius * Math.cos(angle)).toFixed(4);
        const y = +(centerRadius * Math.sin(angle)).toFixed(4);
        coordsOffset.push({ x, y });
      }
      coordsOffset.push(coordsOffset[0]);

      // Gambar toolpath yang offset (real path)
      ctx.beginPath();
      ctx.strokeStyle = '#000';
      coordsOffset.forEach((p, i) => {
        const scale = 1.2;
        const x = cx + p.x * scale;
        const y = cy - p.y * scale;
        if (i === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      });
      ctx.stroke();

      // Tambahkan titik koordinat pertama (highlight)
      const p0 = coordsOffset[0];
      const px = cx + p0.x * 1.2;
      const py = cy - p0.y * 1.2;
      ctx.beginPath();
      ctx.fillStyle = 'red';
      ctx.arc(px, py, 4, 0, 2 * Math.PI);
      ctx.fill();
      ctx.fillText("P0", px + 5, py - 5);

      // Tambahkan panah axis X dan Y
      ctx.beginPath();
      ctx.moveTo(cx, cy);
      ctx.lineTo(cx + 40, cy);
      ctx.strokeStyle = 'blue';
      ctx.stroke();
      ctx.fillText("+X", cx + 45, cy + 5);

      ctx.beginPath();
      ctx.moveTo(cx, cy);
      ctx.lineTo(cx, cy - 40);
      ctx.strokeStyle = 'green';
      ctx.stroke();
      ctx.fillText("+Y", cx + 5, cy - 45);

      // Output koordinat asli (tanpa offset)
      const coordText = coordsBase.map(p => `X${p.x} Y${p.y}`).join("\n");
      document.getElementById('coords').value = coordText;

      // Output G-code (sudah offset)
      gcodeText = coordsOffset.map(p => `G01 X${p.x} Y${p.y}`).join("\n");
      document.getElementById('gcode').value = gcodeText;
    }

    function downloadGCode() {
      if (!gcodeText) return alert('Silakan generate terlebih dahulu.');
      const blob = new Blob([gcodeText], { type: 'text/plain' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'toolpath.gcode';
      link.click();
    }
  </script>
</body>
</html>


âœ… Sudah gua tambahin bro!

Sekarang gambar di canvas udah punya:

1. ðŸ”´ Titik awal (P0) ditandai dengan lingkaran merah + label "P0"


2. ðŸ”µ Arah sumbu X ditunjukkan dengan garis biru dan label "+X"


3. ðŸŸ¢ Arah sumbu Y ditunjukkan dengan garis hijau dan label "+Y"



Jadi lu atau siapa pun yang akses bisa langsung lihat:

Mulainya dari mana

Jalurnya muter ke mana

Orientasi koordinatnya


Kalau mau ditambah urutan nomor titik (P0, P1, P2...), tinggal bilang bro ðŸ™Œ

